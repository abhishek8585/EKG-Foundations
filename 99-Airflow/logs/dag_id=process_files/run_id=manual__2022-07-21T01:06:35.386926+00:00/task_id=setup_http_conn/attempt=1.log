[2022-07-21 01:06:36,382] {taskinstance.py:1179} INFO - Dependencies all met for <TaskInstance: process_files.setup_http_conn manual__2022-07-21T01:06:35.386926+00:00 [queued]>
[2022-07-21 01:06:36,390] {taskinstance.py:1179} INFO - Dependencies all met for <TaskInstance: process_files.setup_http_conn manual__2022-07-21T01:06:35.386926+00:00 [queued]>
[2022-07-21 01:06:36,390] {taskinstance.py:1376} INFO - 
--------------------------------------------------------------------------------
[2022-07-21 01:06:36,390] {taskinstance.py:1377} INFO - Starting attempt 1 of 1
[2022-07-21 01:06:36,390] {taskinstance.py:1378} INFO - 
--------------------------------------------------------------------------------
[2022-07-21 01:06:36,410] {taskinstance.py:1397} INFO - Executing <Task(BashOperator): setup_http_conn> on 2022-07-21 01:06:35.386926+00:00
[2022-07-21 01:06:36,417] {standard_task_runner.py:52} INFO - Started process 609 to run task
[2022-07-21 01:06:36,419] {standard_task_runner.py:79} INFO - Running: ['***', 'tasks', 'run', 'process_files', 'setup_http_conn', 'manual__2022-07-21T01:06:35.386926+00:00', '--job-id', '4', '--raw', '--subdir', 'DAGS_FOLDER/process_files.py', '--cfg-path', '/tmp/tmpihj296cd', '--error-file', '/tmp/tmptfp34_r4']
[2022-07-21 01:06:36,419] {standard_task_runner.py:80} INFO - Job 4: Subtask setup_http_conn
[2022-07-21 01:06:36,482] {task_command.py:371} INFO - Running <TaskInstance: process_files.setup_http_conn manual__2022-07-21T01:06:35.386926+00:00 [running]> on host 4534be881ccc
[2022-07-21 01:06:36,562] {taskinstance.py:1591} INFO - Exporting the following env vars:
AIRFLOW_CTX_DAG_OWNER=***
AIRFLOW_CTX_DAG_ID=process_files
AIRFLOW_CTX_TASK_ID=setup_http_conn
AIRFLOW_CTX_EXECUTION_DATE=2022-07-21T01:06:35.386926+00:00
AIRFLOW_CTX_TRY_NUMBER=1
AIRFLOW_CTX_DAG_RUN_ID=manual__2022-07-21T01:06:35.386926+00:00
[2022-07-21 01:06:36,563] {subprocess.py:62} INFO - Tmp dir root location: 
 /tmp
[2022-07-21 01:06:36,563] {subprocess.py:74} INFO - Running command: ['bash', '-c', "*** connections delete 'http_api'\n*** connections delete 'pg_conn'\n\n\n*** connections add 'http_api' --conn-type 'http' --conn-host 'raw.githubusercontent.com/tadinve/EKG-Foundations/master/04A-postgress/'\n\n\n*** connections add pg_conn \\\n  --conn-type 'postgres' \\\n  --conn-host 'my-postgres' \\\n  --conn-login 'postgres' \\\n  --conn-schema 'northwind' \\\n  --conn-password 'postgres' \n\nexit 0"]
[2022-07-21 01:06:36,575] {subprocess.py:85} INFO - Output:
[2022-07-21 01:06:39,146] {subprocess.py:92} INFO - Did not find a connection with `conn_id`=http_api
[2022-07-21 01:06:42,008] {subprocess.py:92} INFO - Did not find a connection with `conn_id`=pg_conn
[2022-07-21 01:06:46,892] {subprocess.py:92} INFO - [[34m2022-07-21 01:06:46,892[0m] {[34mproviders_manager.py:[0m218} INFO[0m - Optional provider feature disabled when importing '***.providers.google.leveldb.hooks.leveldb.LevelDBHook' from 'apache-***-providers-google' package[0m
[2022-07-21 01:06:47,839] {subprocess.py:92} INFO - Successfully added `conn_id`=http_api : http://:@raw.githubusercontent.com/tadinve/EKG-Foundations/master/04A-postgress/:
[2022-07-21 01:06:47,846] {subprocess.py:92} INFO - Traceback (most recent call last):
[2022-07-21 01:06:47,846] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
[2022-07-21 01:06:47,846] {subprocess.py:92} INFO -     cursor, statement, parameters, context
[2022-07-21 01:06:47,846] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 719, in do_execute
[2022-07-21 01:06:47,846] {subprocess.py:92} INFO -     cursor.execute(statement, parameters)
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO - psycopg2.errors.UniqueViolation: duplicate key value violates unique constraint "unique_conn_id"
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO - DETAIL:  Key (conn_id)=(http_api) already exists.
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO - 
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO - 
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO - The above exception was the direct cause of the following exception:
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO - 
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO - Traceback (most recent call last):
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO -   File "/home/***/.local/bin/***", line 8, in <module>
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO -     sys.exit(main())
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/***/__main__.py", line 38, in main
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO -     args.func(args)
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/***/cli/cli_parser.py", line 51, in command
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO -     return func(*args, **kwargs)
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/***/utils/cli.py", line 99, in wrapper
[2022-07-21 01:06:47,847] {subprocess.py:92} INFO -     return f(*args, **kwargs)
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/***/cli/commands/connection_command.py", line 285, in connections_add
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -     raise SystemExit(msg)
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -   File "/usr/local/lib/python3.7/contextlib.py", line 119, in __exit__
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -     next(self.gen)
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/***/utils/session.py", line 33, in create_session
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -     session.commit()
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 1428, in commit
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -     self._transaction.commit(_to_root=self.future)
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 829, in commit
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -     self._prepare_impl()
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 808, in _prepare_impl
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -     self.session.flush()
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 3345, in flush
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -     self._flush(objects)
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 3485, in _flush
[2022-07-21 01:06:47,848] {subprocess.py:92} INFO -     transaction.rollback(_capture_exception=True)
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/util/langhelpers.py", line 72, in __exit__
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -     with_traceback=exc_tb,
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -     raise exception
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/orm/session.py", line 3445, in _flush
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -     flush_context.execute()
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 456, in execute
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -     rec.execute(self)
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/orm/unitofwork.py", line 633, in execute
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -     uow,
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 249, in save_obj
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -     insert,
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1224, in _emit_insert_statements
[2022-07-21 01:06:47,849] {subprocess.py:92} INFO -     execution_options=execution_options,
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1614, in _execute_20
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -     return meth(self, args_10style, kwargs_10style, execution_options)
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 326, in _execute_on_connection
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -     self, multiparams, params, execution_options
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1491, in _execute_clauseelement
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -     cache_hit=cache_hit,
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -     e, statement, parameters, cursor, context
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 2027, in _handle_dbapi_exception
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -     sqlalchemy_exception, with_traceback=exc_info[2], from_=e
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 207, in raise_
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -     raise exception
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -     cursor, statement, parameters, context
[2022-07-21 01:06:47,850] {subprocess.py:92} INFO -   File "/home/***/.local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 719, in do_execute
[2022-07-21 01:06:47,851] {subprocess.py:92} INFO -     cursor.execute(statement, parameters)
[2022-07-21 01:06:47,851] {subprocess.py:92} INFO - sqlalchemy.exc.IntegrityError: (psycopg2.errors.UniqueViolation) duplicate key value violates unique constraint "unique_conn_id"
[2022-07-21 01:06:47,851] {subprocess.py:92} INFO - DETAIL:  Key (conn_id)=(http_api) already exists.
[2022-07-21 01:06:47,851] {subprocess.py:92} INFO - 
[2022-07-21 01:06:47,851] {subprocess.py:92} INFO - [SQL: INSERT INTO connection (conn_id, conn_type, description, host, schema, login, password, port, is_encrypted, is_extra_encrypted, extra) VALUES (%(conn_id)s, %(conn_type)s, %(description)s, %(host)s, %(schema)s, %(login)s, %(password)s, %(port)s, %(is_encrypted)s, %(is_extra_encrypted)s, %(extra)s) RETURNING connection.id]
[2022-07-21 01:06:47,851] {subprocess.py:92} INFO - [parameters: {'conn_id': 'http_api', 'conn_type': 'http', 'description': None, 'host': 'raw.githubusercontent.com/tadinve/EKG-Foundations/master/04A-postgress/', 'schema': None, 'login': None, 'password': None, 'port': None, 'is_encrypted': False, 'is_extra_encrypted': False, 'extra': None}]
[2022-07-21 01:06:47,851] {subprocess.py:92} INFO - (Background on this error at: https://sqlalche.me/e/14/gkpj)
[2022-07-21 01:06:51,622] {subprocess.py:92} INFO - [[34m2022-07-21 01:06:51,622[0m] {[34mproviders_manager.py:[0m218} INFO[0m - Optional provider feature disabled when importing '***.providers.google.leveldb.hooks.leveldb.LevelDBHook' from 'apache-***-providers-google' package[0m
[2022-07-21 01:06:51,884] {subprocess.py:92} INFO - [[34m2022-07-21 01:06:51,884[0m] {[34mcrypto.py:[0m82} WARNING[0m - empty cryptography key - values will not be stored encrypted.[0m
[2022-07-21 01:06:51,891] {subprocess.py:92} INFO - A connection with `conn_id`=pg_conn already exists.
[2022-07-21 01:06:52,506] {subprocess.py:96} INFO - Command exited with return code 0
[2022-07-21 01:06:52,537] {taskinstance.py:1420} INFO - Marking task as SUCCESS. dag_id=process_files, task_id=setup_http_conn, execution_date=20220721T010635, start_date=20220721T010636, end_date=20220721T010652
[2022-07-21 01:06:52,575] {local_task_job.py:156} INFO - Task exited with return code 0
[2022-07-21 01:06:52,614] {local_task_job.py:273} INFO - 1 downstream tasks scheduled from follow-on schedule check
